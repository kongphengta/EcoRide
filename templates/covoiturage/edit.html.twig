{% extends 'base.html.twig' %}

{% block title %}Modifier le Covoiturage
{% endblock %}

{% block body %}
	<div class="container my-5">
		<h1>Modifier mon annonce de covoiturage</h1>

		{# Affiche le formulaire de modification du covoiturage #}
		{{ form_start(covoiturageForm) }}
		{{ form_widget(covoiturageForm) }}
		<div class="d-flex justify-content-between align-items-center mt-4">
			<button type="submit" class="btn btn-primary">
				<i class="bi bi-save me-2"></i>Mettre à jour
			</button>

			{# Lien pour revenir en arrière #}
			<a href="{{ path('app_profile_my_covoiturages') }}" class="btn btn-secondary">
				<i class="bi bi-arrow-left"></i>
				Retour à mes covoiturages
			</a>
		</div>
		{{ form_end(covoiturageForm) }}

		<hr
		class="my-4">

		{# Zone de danger pour l'annulation #}
		<h2 class="h4 mt-4 text-danger">Zone de danger</h2>
		<p>L'annulation d'un trajet est définitive et notifiera tous les passagers ayant réservé.</p>

		{% if covoiturage.statut in ['Proposé', 'Confirmé', 'Complet'] %}
			<form method="post" action="{{ path('app_covoiturage_cancel', {'id': covoiturage.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir annuler ce trajet ? Toutes les réservations seront également annulées.');">
				<input type="hidden" name="_token" value="{{ csrf_token('cancel_covoiturage' ~ covoiturage.id) }}">
				<button class="btn btn-danger">
					<i class="bi bi-x-octagon-fill me-2"></i>Annuler ce covoiturage
				</button>
			</form>
		{% endif %}
	</div>
{% endblock %}
