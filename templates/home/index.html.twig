{# templates/index.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Bienvenue sur EcoRide!
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<header class="text-center mb-5">
			<h1>Bienvenue sur
				<span class="text-success">EcoRide</span>
			</h1>
			<p class="lead">Votre plateforme de covoiturage
				<span class="text-success">écologique</span>.</p>
		</header>

		<section class="mb-5">
			<h2>
				<i class="bi bi-leaf-fill text-success me-2"></i>
				Notre Engagement Écologique</h2>
			<p>EcoRide est née d'une volonté forte de réduire l'empreinte carbone de nos déplacements. En favorisant le covoiturage, nous offrons une alternative économique et respectueuse de l'environnement pour vos trajets en voiture.</p>
			<div class="row mt-4">
				<div class="col-md-6 mb-3">
					<h3 class="text-success mb-3">Covoiturage Écologique</h3>
					<img src="{{ asset('build/images/covoiturage.jpg') }}" alt="Covoiturage écologique" class="img-fluid rounded shadow-sm">
				</div>
				<div class="col-md-6 mb-3">
					<h3 class="text-success mb-3">Partage de Trajet Convivial</h3>
					<img src="{{ asset('build/images/trajetconvivial.jpg') }}" alt="Partage de trajet convivial" class="img-fluid rounded shadow-sm">
				</div>
			</div>
			<h3 class="text-success mt-4 text-center">
				<i>Rejoignez la communauté EcoRide et contribuez à un avenir plus vert tout en économisant sur vos déplacements !</i>
			</h3>
		</section>

		   <section class="mb-5">
			   <h2>
				   <i class="bi bi-clock-history me-2"></i>
				   Derniers trajets proposés</h2>
			   <div class="row justify-content-center">
				   <div class="col-md-10">
					   {% if covoiturages is not empty %}
						   {% for covoiturage in covoiturages %}
							   <div class="card mb-3">
								   <div class="card-body">
									   <div class="d-flex justify-content-between">
										   <div>
											   <h5 class="card-title">{{ covoiturage.lieuDepart }} &rarr; {{ covoiturage.lieuArrivee }}</h5>
											   <h6 class="card-subtitle mb-2 text-muted">Le {{ covoiturage.dateDepart|date('d/m/Y') }} à {{ covoiturage.heureDepart|date('H:i') }}</h6>
										   </div>
										   <div class="text-end">
											   <span class="h4">{{ covoiturage.prixPersonne }} €</span>
											   <p class="text-muted mb-0">par personne</p>
										   </div>
									   </div>
									   <hr>
									   <div class="d-flex justify-content-between align-items-center">
										   <div>
											   <img src="{{ covoiturage.chauffeur.avatarUrl(40) }}" alt="Avatar de {{ covoiturage.chauffeur.pseudo }}" class="rounded-circle me-2" style="width:40px; height:40px;">
											   <span>{{ covoiturage.chauffeur.pseudo }}</span>
											   <span class="badge bg-warning text-dark ms-2"><i class="bi bi-star-fill"></i> {{ covoiturage.chauffeur.averageRating|number_format(1) }}</span>
											   {% if covoiturage.voiture.isElectric %}
												   <span class="badge bg-success ms-2" title="Voyage écologique"><i class="bi bi-leaf-fill"></i> Éco</span>
											   {% endif %}
										   </div>
										   <div>
											   <span class="badge bg-info me-2">{{ covoiturage.nbPlaceRestantes }} place(s) restante(s)</span>
											   <a href="{{ path('app_covoiturage_show', {'id': covoiturage.id}) }}" class="btn btn-primary btn-sm">Voir les détails</a>
										   </div>
									   </div>
								   </div>
							   </div>
						   {% endfor %}
						   <div class="d-flex justify-content-center mt-4">
							   <a href="{{ path('app_covoiturage_index') }}" class="btn btn-outline-success btn-lg">
								   <i class="bi bi-list"></i> Voir tous les trajets
							   </a>
						   </div>
					   {% else %}
						   <div class="alert alert-info" role="alert">
							   <h4 class="alert-heading">Aucun covoiturage disponible</h4>
							   <p>Il n'y a actuellement aucun covoiturage disponible. Revenez plus tard ou proposez votre propre trajet !</p>
							   <a href="{{ path('app_covoiturage_new') }}" class="btn btn-success">Proposer un trajet</a>
						   </div>
					   {% endif %}
				   </div>
			   </div>
		   </section>
	</div>
{% endblock %}
