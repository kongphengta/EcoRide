<nav class="navbar navbar-expand-lg navbar-dark bg-success shadow-sm">
	<div class="container-fluid">
		<a class="navbar-brand" href="{{ path('app_home') }}"><img src="{{ asset('build/images/logo.png') }}" alt="EcoRide" class="img-fluid" style="max-height: 40px;">EcoRide</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item">
					<a class="nav-link" href="{{ path('app_home') }}">Accueil</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{{ path('app_covoiturage_index') }}">Trouver un covoiturage</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{{ path('app_contact') }}">Contact</a>
				</li>
				{% if is_granted('ROLE_CHAUFFEUR') %}
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_covoiturage_new') }}">Proposer un trajet</a>
					</li>
				{% endif %}
			</ul>
			<ul class="navbar-nav">
				{% if app.user %}
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							{% if app.user.photo %}
								<img src="{{ asset('uploads/' ~ app.user.photo) }}" alt="Avatar de {{ app.user.pseudo }}" class="rounded-circle me-2" width="32" height="32" style="object-fit: cover;">
							{% else %}
								<img src="{{ asset('build/images/default-avatar.png') }}" alt="Avatar par défaut" class="rounded-circle me-2" width="32" height="32" style="object-fit: cover;">
							{% endif %}
							<span>{{ app.user.pseudo }}</span>
						</a>
						<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
							<li>
								<a class="dropdown-item" href="{{ path('app_profile') }}">Mon Profil</a>
							</li>
							<li>
								<a class="dropdown-item" href="{{ path('app_profile_my_reservations') }}">Mes Réservations</a>
							</li>
							<li>
								<a class="dropdown-item" href="{{ path('app_profile_my_covoiturages') }}">Mes Covoiturages</a>
							</li>
							<li>
								<a class="dropdown-item" href="{{ path('app_voiture_index') }}">Mes Voitures</a>
							</li>
							<li><hr class="dropdown-divider"></li>
							<li>
								<a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">Déconnexion</a>
							</li>
						</ul>
					</li>
				{% else %}
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_login') }}">Connexion</a>
					</li>
					<li class="nav-item">
						<a class="nav-link btn btn-primary text-white px-3" href="{{ path('app_register') }}">Inscription</a>
					</li>
				{% endif %}
			</ul>
		</div>

		{# Modal de confirmation de déconnexion #}
		<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="logoutModalLabel">Confirmer la déconnexion</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
					</div>
					<div class="modal-body">
						Êtes-vous sûr de vouloir vous déconnecter ?
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
						<a href="{{ path('app_logout') }}" class="btn btn-danger">Se déconnecter</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</nav>
